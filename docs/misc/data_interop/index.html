<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">


<title data-react-helmet="true">Data Interop | scalajs-reaction</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Data Interop | scalajs-reaction"><meta data-react-helmet="true" name="description" content="Since there is an emphasis on interop with javascript reactjs components, you"><meta data-react-helmet="true" property="og:description" content="Since there is an emphasis on interop with javascript reactjs components, you"><meta data-react-helmet="true" property="og:url" content="https://aappddeevv.github.io/scalajs-reaction/docs/misc/data_interop">

<link data-react-helmet="true" rel="shortcut icon" href="/scalajs-reaction/img/favicon.ico">


<link rel="stylesheet" href="/scalajs-reaction/styles.031cb377.css">


<link rel="preload" href="/scalajs-reaction/styles.5c3bc461.js" as="script">

<link rel="preload" href="/scalajs-reaction/runtime~main.6936177f.js" as="script">

<link rel="preload" href="/scalajs-reaction/main.650d5008.js" as="script">

<link rel="preload" href="/scalajs-reaction/1.3a76b485.js" as="script">

<link rel="preload" href="/scalajs-reaction/2.bf216f74.js" as="script">

<link rel="preload" href="/scalajs-reaction/3.d2bbdf3a.js" as="script">

<link rel="preload" href="/scalajs-reaction/1be78505.128db190.js" as="script">

<link rel="preload" href="/scalajs-reaction/12747410.54802530.js" as="script">

<link rel="preload" href="/scalajs-reaction/17896441.bf8545bc.js" as="script">

<link rel="preload" href="/scalajs-reaction/9d84b17f.0a91a7f7.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/scalajs-reaction/"><img class="navbar__logo" src="/scalajs-reaction/img/logo.svg" alt="scalajs-reaction logo"><strong class="navbar__title">scalajs-reaction</strong></a><a class="navbar__item navbar__link" href="/scalajs-reaction/docs/intro/index">Docs</a><a class="navbar__item navbar__link" href="/scalajs-reaction/blog">Blog</a><a target="_blank" rel="noopener noreferrer" href="/scalajs-reaction/api" class="navbar__item navbar__link">API</a><a target="_blank" rel="noopener noreferrer" href="/scalajs-reaction/demo" class="navbar__item navbar__link">Demo</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/aappddeevv/scalajs-reaction" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/scalajs-reaction/"><img class="navbar__logo" src="/scalajs-reaction/img/logo.svg" alt="scalajs-reaction logo"><strong class="navbar__title">scalajs-reaction</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/scalajs-reaction/docs/intro/index">Docs</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/scalajs-reaction/blog">Blog</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/aappddeevv/scalajs-reaction" class="menu__link" position="right">GitHub</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="/scalajs-reaction/api" class="menu__link" position="left">API</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="/scalajs-reaction/demo" class="menu__link" position="left">Demo</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/intro/index">What is it?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/intro/using">Getting Started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Core</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/core/creating">Defining Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/core/vdom">Virtual DOM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/core/exporting">Exporting From Scala to JS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/core/importing">Importing from JS to Scala</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Facades</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/facades/facades">Facades</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/facades/react_native">React Native</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Useful Topics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/topics/styling">Styling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/topics/forms">Forms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/topics/routing">Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/topics/redux">Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/scalajs-reaction/docs/topics/data_validation">Data Validation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Miscellaneous</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/scalajs-reaction/docs/misc/bundling">Bundling</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" tabindex="0" href="/scalajs-reaction/docs/misc/data_interop">Data Interop</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Data Interop</h1></header><div class="markdown"><p>Since there is an emphasis on interop with javascript reactjs components, you
need to also interop with javascript data. Scala.js offers <code>js.UndefOr</code> to
interop with fields in data structures that do not exist. Of course, in
javascript a value can be undefined or null and sometimes they mean the same
thing and sometimes not to an API. Sometimes APIs are not precise and either
undefined or null means &quot;not present.&quot;</p><p>scala itself offers the ability to assign <code>null</code>
(subclass of <code>Null</code>) to most values e.g. a String can be a value (&quot;george&quot;),
empty (&quot;&quot;) or null.</p><p>The key message is that even with a typescript description to guide you,
you need to be defensive since null and undefined are often used interchangeably
in javascript since its so easy to do <code>a ? ...</code> or <code>!!a</code> ior <code>if(a) ...</code> and if a is null or undefined,
it will evaluate to &quot;false&quot;.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="js---scala"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#js---scala" title="Direct link to heading">#</a>JS -&gt; Scala</h2><p>Given that we also use native and non-native JS traits to describe the shape of
data, we may wonder how to handle data from web APIs, for example in the
structure:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    field1</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    field2</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>field1 can be undefined or a string and field2 can be a string value, undefined
or null. Depending on the nature of the data source, you may encounter alot of
field1 or field2 on some combination of that. For example, field1 could
represent a value that is non-nullable in the source database but may not have
been requested in a fetch and may not be present. field2 could represent a
nullable field in the source database that was not requested or was requested
and was null.</p><p>The question is how to best model these in scala so that we do not have to write
an object conversions for each data structure. </p><p>If you know the data is either there or not there, then UndefOr is fine recognizing
that &quot;null&quot; is a valid value:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">trait Foo extends js.Object {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var field: js.UndefOr[String] // var so mutable, use val for immutable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>However, if field can be null, undefined or a value what should we use? Consider:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">trait Foo extends js.Object {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var field1: js.UndefOr[String]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Here, the value may not be present but it could be null, which is <em>different</em>
then not being present. We could test:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">aFoo.field == null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// or</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">aFoo.orNull == null</span></div></div></div></div></div><p>which returns true or false depending on whether the value is null. <code>UndefOr</code>
has its own pimp which returns null if UndefOr is undefined, but not if its
null:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">val x: jsUndefOr[String] = ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">val test: String = x.orNull // test could be a string or null</span></div></div></div></div></div><p>What we generally need when obtaining data from javascript is something that
recognizes the idioms that if a value is undefined or null, then its &quot;false&quot; or
None, not just if its&#x27; undefined. UndefOr&#x27;s <code>isEmpty</code> function just checks if
its undefined, so its not quite right for our needs. What we need is to get to a
scala Option (or something like that) when the value is null <em>or</em> undefined.</p><p>scalajs-reaction provides a pimp:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">final case class JsUndefOrOps[A](a: UndefOr[A]) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  def isNull  = a == null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  def isEmpty = isNull || !a.isDefined</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>which can be implicitly used by importing the syntax so you can test:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">val aBoolean = aFoo.field1.isNull // is it just null?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">val aBoolean2 = afoo.field1.isEmpty // is it null or undefined</span></div></div></div></div></div><p>So we can test for null fairly easily given the <code>UndefOr</code> type definition. But
we want to manipulate these things with some more functional syntax. For
example, we would like an Option-based variant that is None if <code>isEmpty==true</code>
and the value otherwise. Using <code>UndefOr.toOption</code> actually may wrap a &quot;null&quot;
value and produce a <code>Some(null)</code> instead of None. So clearly, just using
<code>.toOption</code> is not a good answer. So at the expense of a little boolean check,
perhaps we could do something more convenient. </p><p>Let&#x27;s state what we want, an
Option that reflects both UndefOr and possible underlying null value:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">final case class JsUndefOrOps[A](a: UndefOr[A]) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  @inline def toNonNullOption = if(a == null || a.isEmpty) None else a.toOption</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>So now we can safely convert a UndefOr to an Option and have it be &quot;null&quot; if it
is null or undefined and a Some with a non-null value otherwise. The cost you
pay is a small conversion charge. So in general, it&#x27;s ok to model your data us
UndefOr:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> val x: Option[String] = aFoo.field1.toNonNullOption</span></div></div></div></div></div><p>Also, if you need to set data to null and the trait defines it as an UndefOr,
just set it directly to null, just before you dispatch it javascript code:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  aFoo.field1 = null</span></div></div></div></div></div><p>You should note that just declaring the attribute as a type:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">trait Foo extends js.Object {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  var field1: String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>does not communicate that it can be null but we know scala allows this. </p><p>Perhaps we should use
<code>var field1: String|Null</code>. There&#x27;s nothing wrong with that except scala already
defines that String to be potentially null so why go through the hassle?
See below why we might want to be that explicit.</p><p>If you see a trait with just a plain String and you want an Option just wrap it
just like in, <code>Option(field1)</code> since Option translates null to None in plain
scala to begin with.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="scala---js"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#scala---js" title="Direct link to heading">#</a>Scala -&gt; JS</h2><p>The story is a bit easier on the Scala -&gt; JS connection. You generally need this
when stuffing data into a data structured destined for the js side of the world.</p><ul><li>Have (a: Option[T]): <ul><li><code>a.orUndefined</code> yields an UndefOr which is the type that will probably be
in most of your non-native JS traits</li><li>Use <code>a.getOrElse(null)</code> to obtain the value or null for some non-native JS traits</li></ul></li><li>Have (a: A): <ul><li>Wrap it ala <code>js.defined(a)</code> to get an <code>UndefOr[A]</code> to satisfy your trait&#x27;s
type (if you used the approach above).</li><li>If the value could be null, you can wrap it in Option(a) then convert it as
described above to obtain an UndefOr. However if your JS target is <code>A|null</code>
then there is nothing you need to do as scala and javascript both match the
desired semantics.</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="pimps"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pimps" title="Direct link to heading">#</a>pimps</h2><p>Check out
<a href="https://github.com/aappddeevv/scalajs-react/blob/master/scalajs-react-core/src/main/scala/syntax.scala">syntax.scala</a>
for many pimps that you can apply to UndefOr values to help with data
manipulation on the scala side. There&#x27;s alot there and its easy to forget them
unless they are in a cheatsheet.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dont-forget-about-a-structural-check"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#dont-forget-about-a-structural-check" title="Direct link to heading">#</a>Don&#x27;t Forget About a Structural Check</h2><p>There is a little known converter in scala.js. If you have two traits that are
not related but have overlapping fields, you may need to cast one to the other
what is essentially a structural cast, check out <a href="https://www.scala-js.org/api/scalajs-library/latest/#scala.scalajs.js.package@use%5BA%5D(x:A):scala.scalajs.js.Using%5BA%5D">funky structural
cast-kindof</a>. It uses <code>use</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="tldr"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#tldr" title="Direct link to heading">#</a>TL;DR</h2><p>Let&#x27;s assume that typescript is not properly annotated and some undefineds and nulls get mixed up. </p><p>If your typescript says:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">field1</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span></div></div></div></div></div><p>use this type of declaration in your trait:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var/val field1: js.UndefOr[String] = js.undefined</span></div></div></div></div></div><p>and use <code>field1 = null</code> if you want to set it to null or extract using
<code>field1.toNonNullOption</code> to extract an option more safely than just <code>toOption</code>
since the value could secretly be a null.</p><p>If typescript says:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">field1</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token keyword" style="font-style:italic">null</span></div></div></div></div></div><p>You can be more specific in scala.js than just saying its String as in scala
a value like that can be null. However, we can be more procise:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">val field1: js.UndefOr[String|Null]</span></div></div></div></div></div><p>You have a choice of how explicit you want to make this. </p><p>If you use <code>String|Null</code> you can use an implicit <code>absorbNull</code> to change this to a <code>js.UndefOr[String]</code>
like so <code>field1.absorbNull</code> or <code>field1.absorbNullKeepTruthy</code>.
or you can map into it and flatten the <code>String|Null</code> via a <code>field1.flatMap(_.toUndefOr)</code>. If
the field was just <code>val field1: String|Null</code> then there is an implicit conversion
from <code>String|Null</code> to <code>js.UndefOr[]</code> via <code>aStringNull.toUndefOr</code> which when flatMapped,
gives you a <code>js.UndefOr[String]</code>. Again, you have a choice on how you want to do this.</p><p>Check out the syntax extensions to get a feel for a wide range of how to treat this
common javascript pattern. There are some specialized conversions for <code>js.UndefOr[String|Null]</code>
and <code>js.UndefOr[Boolean|Null]</code>.</p><p>If typescript says:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-typescript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">field1</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token keyword" style="font-style:italic">null</span></div></div></div></div></div><p>and you use </p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-scala codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var/val field1: String|Null</span></div></div></div></div></div><p>you can set it null if you need to: <code>field1 = null</code>.</p><p>Let&#x27;s hope the typescript interface descriptions are correct!</p><p>Again, please see the syntax extensions package a multitude of ways to manage these nits.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/aappddeevv/scalar2020online/edit/master/presentation/docs/misc/datainterop.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/scalajs-reaction/docs/misc/bundling"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">Â« Bundling</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#js---scala" class="contents__link">JS -&gt; Scala</a></li><li><a href="#scala---js" class="contents__link">Scala -&gt; JS</a></li><li><a href="#pimps" class="contents__link">pimps</a></li><li><a href="#dont-forget-about-a-structural-check" class="contents__link">Don&#39;t Forget About a Structural Check</a></li><li><a href="#tldr" class="contents__link">TL;DR</a></li></ul></div></div></div></div></main></div></div>
</div>

<script src="/scalajs-reaction/styles.5c3bc461.js"></script>

<script src="/scalajs-reaction/runtime~main.6936177f.js"></script>

<script src="/scalajs-reaction/main.650d5008.js"></script>

<script src="/scalajs-reaction/1.3a76b485.js"></script>

<script src="/scalajs-reaction/2.bf216f74.js"></script>

<script src="/scalajs-reaction/3.d2bbdf3a.js"></script>

<script src="/scalajs-reaction/1be78505.128db190.js"></script>

<script src="/scalajs-reaction/12747410.54802530.js"></script>

<script src="/scalajs-reaction/17896441.bf8545bc.js"></script>

<script src="/scalajs-reaction/9d84b17f.0a91a7f7.js"></script>


</body>
</html>