<html><head><title>scalajs-react: React Interop</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="aappddeevv" /><meta name="description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="og:image" content="/scalajs-react/img/poster.png" /><meta name="og:title" content="scalajs-react: React Interop" /><meta name="og:site_name" content="scalajs-react" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><link rel="icon" type="image/png" href="/scalajs-react/img/favicon.png" /><meta name="twitter:title" content="scalajs-react: React Interop" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="A react integration library for scala.js in the spirit of ReasonReact" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/scalajs-react/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/scalajs-react/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/scalajs-react/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/scalajs-react/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/scalajs-react/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/scalajs-react/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/scalajs-react/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/scalajs-react/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/scalajs-react/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/scalajs-react/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/scalajs-react/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/scalajs-react/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/scalajs-react/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/scalajs-react/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/scalajs-react/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/scalajs-react/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/scalajs-react/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/scalajs-react/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/scalajs-react/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/scalajs-react/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/scalajs-react/highlight/styles/default.css" /><link rel="stylesheet" href="/scalajs-react/css/style.css" /><link rel="stylesheet" href="/scalajs-react/css/palette.css" /><link rel="stylesheet" href="/scalajs-react/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/scalajs-react/" class="brand"><div class="brand-wrapper"><span>scalajs-react</span></div></a></li> <li><a href="/scalajs-react/docs/index.html" class="">Getting Started</a></li> <li><a href="/scalajs-react/docs/creating.html" class="">Creating scala.js Components</a></li> <li><a href="/scalajs-react/docs/importing.html" class="">Importing from JS</a></li> <li><a href="/scalajs-react/docs/exporting.html" class="">Exporting to JS</a></li> <li><a href="/scalajs-react/docs/styling.html" class="">Styling Suggestions</a></li> <li><a href="/scalajs-react/docs/vdom.html" class="">Virtual DOM</a></li> <li><a href="/scalajs-react/docs/redux.html" class="">Redux</a></li> <li><a href="/scalajs-react/docs/datainterop.html" class="">Data interop</a></li> <li><a href="/scalajs-react/docs/fabric.html" class="">office-fabric-ui-react</a></li> <li><a href="/scalajs-react/docs/mixedproject.html" class="">Mixed Projects</a></li> <li><a href="/scalajs-react/docs/reactinterop.html" class=" active ">React Interop</a></li> <li><a href="/scalajs-react/docs/macros.html" class="">macros</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-react"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/aappddeevv/scalajs-react"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('scalajs-react A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('scalajs-react A react integration library for scala.js in the spirit of ReasonReact');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="aappddeevv" data-github-repo="scalajs-react"><div class="content-wrapper"><section><h1 id="react-interop">React Interop</h1>

<p>The interop layer is structured much like ReasonReact so you can read those
documents to understand how scalaj-react is structured. It’s pretty much the
same thing.</p>

<p>A few differences:</p>
<ul>
  <li>Instead of a record structure for scala side component, we use a javascript
object.</li>
  <li>initialState takes a <code class="highlighter-rouge">Self</code> so you have access to callback handlders in case
any object you need to create for your state requires them. You can use the
other methods to get around this or even use mutable state (and change it
directly) in another API callback like didMount but this makes it easier.</li>
  <li>A generator function is provided in the reducer to create the state update
messages. This is a better approach than having to create your own objects for
the state update directive.</li>
  <li>The methods have been changed so that you are <em>only</em> provided a “self”
function parameter that make sense for that method. You cannot, for example,
see a “state” object in “self” if you are using a stateless component.</li>
  <li>You are forced to defined the retained props or initial state in the “new
methods” call if they are required. If you have a stateful comonent, you must
define them. Mandatory fields on “methods” are indicated by a val as show below.</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">case</span> <span class="k">class</span> <span class="nc">MyState</span><span class="o">(...)</span>
<span class="k">val</span> <span class="n">c</span> <span class="k">=</span> <span class="n">reducerComponent</span><span class="o">[</span><span class="kt">MyState</span><span class="o">](</span><span class="s">"component"</span><span class="o">)</span>
<span class="k">import</span> <span class="nn">c.ops._</span>

<span class="k">def</span> <span class="n">make</span><span class="o">(...)</span> <span class="k">=</span> <span class="n">c</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span><span class="k">new</span> <span class="n">methods</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">initialState</span> <span class="k">=</span> <span class="nc">MyState</span><span class="o">()</span>
    <span class="n">render</span> <span class="k">=</span> <span class="n">js</span><span class="o">.</span><span class="n">defined</span><span class="o">{</span> <span class="n">self</span> <span class="k">=&gt;</span> <span class="o">...</span> <span class="o">}</span>
<span class="o">})</span>

</code></pre>
</div>

<h2 id="latest-reactjs-features">Latest reactjs features</h2>

<h3 id="fragment">Fragment</h3>
<p>scalajs-react supports fragments through <code class="highlighter-rouge">fragmentElement</code>.</p>
<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">ttg.react.elements._</span>

<span class="k">val</span> <span class="n">frag</span> <span class="k">=</span> <span class="n">fragmentElement</span><span class="o">()(</span>
    <span class="nc">MyComponent</span><span class="o">.</span><span class="n">make</span><span class="o">(...),</span>
    <span class="nc">MyOtherComponent</span><span class="o">.</span><span class="n">make</span><span class="o">(...)</span>
<span class="o">)</span>
</code></pre>
</div>

<h3 id="context-provider">Context Provider</h3>
<p>The new context provider API is also support as found in react v16.3.</p>
<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">ttg.react._</span>

<span class="k">object</span> <span class="nc">Contexts</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">App</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">"noname"</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">appContext</span> <span class="k">=</span> <span class="n">context</span><span class="o">.</span><span class="n">make</span><span class="o">[</span><span class="kt">App</span><span class="o">](</span><span class="nc">App</span><span class="o">())</span>
<span class="o">}</span>

<span class="c1">// provider
</span><span class="k">object</span> <span class="nc">Root</span> <span class="o">{</span>
   <span class="k">import</span> <span class="nn">Contexts._</span>
   <span class="k">import</span> <span class="nn">ttg.react.context._</span> <span class="c1">// import implicits
</span>   
   <span class="k">val</span> <span class="nc">Root</span> <span class="k">=</span> <span class="n">statelessComponent</span><span class="o">(</span><span class="s">"Root"</span><span class="o">)</span>
   
   <span class="k">def</span> <span class="n">make</span><span class="o">(</span><span class="n">namePrefix</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span>
     <span class="nc">Root</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span><span class="k">new</span> <span class="n">methods</span> <span class="o">{</span>
       <span class="n">render</span> <span class="k">=</span> <span class="n">js</span><span class="o">.</span><span class="n">defined</span><span class="o">{</span> <span class="n">self</span> <span class="k">=&gt;</span>
         <span class="c1">// or use the default using makeProvider(...children...)
</span>         <span class="n">appContext</span><span class="o">.</span><span class="n">makeProvider</span><span class="o">(</span><span class="nc">App</span><span class="o">(</span><span class="n">name</span><span class="k">=</span><span class="n">namePrefix</span> <span class="o">+</span> <span class="n">appContext</span><span class="o">.</span><span class="n">currentValue</span><span class="o">.</span><span class="n">name</span><span class="o">))(</span>
           <span class="nc">MyComponent</span><span class="o">.</span><span class="n">make</span><span class="o">()</span>
         <span class="o">)}</span>
     <span class="o">})</span>
<span class="o">}</span>

<span class="c1">// consumer
</span><span class="k">object</span> <span class="nc">MyComponent</span> <span class="o">{</span>
    <span class="k">import</span> <span class="nn">Contexts.</span>
    <span class="k">import</span> <span class="nn">ttg.react.context._</span> <span class="c1">// import implicit
</span>    
    <span class="k">val</span> <span class="nc">MyComponent</span> <span class="k">=</span> <span class="n">statelessComponent</span><span class="o">(</span><span class="s">"MyComponent"</span><span class="o">)</span>
    
    <span class="k">def</span> <span class="n">make</span><span class="o">()</span> <span class="k">=</span>
      <span class="nc">MyComponent</span><span class="o">.</span><span class="n">copy</span><span class="o">(</span><span class="k">new</span> <span class="n">methods</span> <span class="o">{</span>
        <span class="n">render</span> <span class="k">=</span> <span class="n">js</span><span class="o">.</span><span class="n">defined</span><span class="o">{</span> <span class="n">self</span> <span class="k">=&gt;</span>
           <span class="n">appContext</span><span class="o">.</span><span class="n">makeConsumer</span><span class="o">{</span> <span class="n">app</span> <span class="k">=&gt;</span>
             <span class="n">app</span><span class="o">.</span><span class="n">name</span>
           <span class="o">}}</span>
      <span class="o">})</span>
<span class="o">}</span>
</code></pre>
</div>

<p>You can provide a scala object, but you can also provide a non-native JS trait that is automatically merged together for a partial update from the default value provided when the context was created. This approach is about “props merging” much like you find in redux. You should take this into account when updating the value in the provider. It may be much more efficient to use a non-native JS trait (i.e. a javascript object). The API is in flux until 16.3 is published.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/scalajs-react/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/scalajs-react/js/main.js"></script></body></html>